/**
 * assets.js
 * Created by raul on 11/20/14.
 */

var plugins = require('gulp-load-plugins')({scope: ['dependencies'], pattern: ['gulp-*','browser-sync']});
var assets = require('../config').assets;
var handleErrors = require('../util/handleErrors');

module.exports = function (gulp) {
    gulp.task('assets', function () {
        return gulp.src(assets.src)
            .pipe(plugins.plumber({errorHandler: handleErrors}))
            .pipe(plugins.newer(assets.dest))
            .pipe(gulp.dest(assets.dest))
            .pipe(plugins.browserSync.reload({stream: true, once: true}))
            .pipe(plugins.notify({message: 'Assets sync complete'}));
    });
}